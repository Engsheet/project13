import{p as w,j as e,L as N,b as c,r as k,S as I}from"./index-06c6c1f5.js";import{b as m,_ as u,c as g,u as S,a as C}from"./region-43499ee0.js";import{F as R}from"./FeedItem-6bacd1df.js";import{N as U}from"./NoResult-cde6063e.js";import{S as x,N as h,K as b,a as d}from"./swiper-a857a5c8.js";import{S as D}from"./ScrollTop-7e4dffaf.js";import{M as E}from"./MetaData-baa07fc2.js";import"./useBaseQuery-d5fe4309.js";import"./index-ea9f9059.js";import"./index-0b99c69c.js";import"./middleware-763781cb.js";import"./getDate-b10b504c.js";import"./getPbImageURL-ebcdbcbf.js";import"./FeedItemHeader-aa1df1b8.js";import"./useFetchList-8f652331.js";import"./useQuery-7f8ad36b.js";import"./follow-af2673d1.js";import"./debounce-1252dfff.js";import"./index.esm-e904fcbc.js";import"./iconBase-51491e03.js";import"./index.esm-1ff9b723.js";const F=r=>{let o=[],a=[];const s=m(t=>t.category);return r&&(a=u.cloneDeep(r)),a.forEach(t=>{const i=t.items.filter(n=>s.includes(n.expand.place.category));t.items=[...i]}),s.includes("전체")?o=r:o=a,o},L=r=>{let o=[],a=[];const s=g(t=>t.region);return r&&(a=u.cloneDeep(r)),a.forEach(t=>{const i=t.items.filter(n=>n.expand.place.address.includes(s));t.items=[...i]}),s==="전체"?o=r:o=a,o};function y(){const r=w.authStore.model.regions,{region:o,selectRegion:a}=g(),s=t=>{const i=t.target.id;a(i)};return e.jsxs(x,{spaceBetween:8,slidesPerView:"auto",navigation:!0,keyboard:{enabled:!0},modules:[h,b],className:"pb-1 text-sm sm:text-base",children:[e.jsx(d,{style:{width:"auto"},children:e.jsx("li",{children:e.jsx("button",{className:`rounded-md border border-transparent bg-gray-50 p-2 text-gray-500 shadow  ${o==="전체"?"bg-secondary font-bold text-white":"hover:border-secondary hover:font-semibold hover:text-black"}`,id:"전체",onClick:s,children:"전체"})})},crypto.randomUUID()),r&&r.map(t=>e.jsx(d,{style:{width:"auto"},children:e.jsx("li",{children:e.jsx("button",{id:t,onClick:s,className:`rounded-md border border-transparent outline-none bg-gray-50 p-2 text-gray-500 shadow  ${o===t?"bg-secondary font-bold text-white":"hover:border-secondary focus:border-secondary focus:font-semibold hover:font-semibold focus:text-black hover:text-black"}`,children:t})},crypto.randomUUID())},crypto.randomUUID())),e.jsx(d,{style:{width:"auto"},children:e.jsx("li",{children:e.jsx(N,{to:"/region",className:"block rounded-md border border-transparent bg-gray-50 p-2 text-gray-500 shadow hover:border-secondary hover:font-semibold hover:text-black",children:"+ 관심지역"})})},crypto.randomUUID())]})}y.propTypes={title:c.string};const T=["전체","한식","양식","일식","중식","카페","술집","동남아 음식","레스토랑","뷔페"];function f(){const{category:r,addCategory:o,removeCategory:a,resetCategory:s}=m();k.useEffect(()=>{!r.length&&s()},[r,s]);const t=i=>{const n=i.target.id;if(n==="전체"){s();return}r.includes(n)?a(n):o(n)};return e.jsx(x,{spaceBetween:8,slidesPerView:"auto",navigation:!0,keyboard:{enabled:!0},modules:[h,b],children:T.map((i,n)=>e.jsx(d,{style:{width:"auto"},children:e.jsx("li",{children:e.jsx("button",{id:i,onClick:t,className:`
                rounded-2xl border p-2 outline-none
                ${r.includes(i)?"hover:bg-primaryLight focus:bg-primaryLight border-primary bg-primary font-bold text-white hover:font-normal focus:font-normal focus:text-black":"text-gray-700 hover:border-primary hover:font-bold focus:border-primary focus:font-bold"}
              `,children:i})},crypto.randomUUID())},n))})}f.propTypes={title:c.string,isActive:c.bool};function re(){const{data:r,isLoading:o,hasNextPage:a,fetchNextPage:s}=S("reviews"),t=C(async(l,v)=>{v.unobserve(l.target),a&&!o&&s()},{threshold:1}),i=L(r),n=F(i),p=(n==null?void 0:n.flatMap(l=>l.items))||null;if(o)return e.jsx(I,{});const j={title:"Best Place - 피드",description:"식당 리뷰를 시간순으로 보여주기",keywords:["맛집","리뷰","커뮤니티"],image:"/logo.svg"};return e.jsxs(e.Fragment,{children:[e.jsx(E,{props:j}),e.jsx(D,{}),e.jsx("h2",{className:"sr-only",children:"피드 페이지"}),e.jsx("ul",{children:e.jsx(y,{})}),e.jsx("ul",{className:"py-3 text-sm",children:e.jsx(f,{})}),e.jsx("ul",{className:"flex flex-col gap-1 bg-gray-50",children:p.length?p.map(l=>e.jsx("li",{children:e.jsx(R,{item:l})},l.id)):e.jsx(U,{title:"검색한 조건과 일치하는 장소의 리뷰가 없어요.",contents:"회원님이 처음으로 리뷰를 작성해보는건 어떠세요?"})}),e.jsx("div",{ref:t,className:"h-[1px]"})]})}export{re as default};
