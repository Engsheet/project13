import{p as b,a as v,r as i,j as e,h as w,s as y}from"./index-06c6c1f5.js";import{a as l}from"./alertMessage-026c37b5.js";import{b as k,c as V}from"./isItemRegValid-c5d51572.js";import{M as E}from"./MetaData-baa07fc2.js";import{S as N,a as r,b as L}from"./SignForm-db7ab70d.js";import{S as B,a as H,N as P,b as R}from"./SignLayout-38b9d900.js";import{S as C}from"./SignLogo-8313ca31.js";import"./index.esm-bcf7d115.js";import"./iconBase-51491e03.js";async function I(s){if(!s)return;const t=await b.collection("users").getFullList(),n=t.map(a=>a.nickname),u=t.map(a=>a.email),c=t.map(a=>a.username);if(n.includes(s.nickname))return l("이미 사용중인 닉네임이 있습니다."),!0;if(u.includes(s.email))return l("이미 사용중인 이메일이 있습니다."),!0;if(c.includes(s.username))return l("이미 사용중인 아이디가 있습니다."),!0}function M(s){for(const[t,n]of Object.entries(s)){if(!k(t,n))return V(t),!0;if(!n)return l("비어있는 내용이 있습니다. 확인해주세요."),!0}}function G(){const s=v(),[t,n]=i.useState(""),[u,c]=i.useState(""),[a,x]=i.useState(""),[m,j]=i.useState(""),[f,h]=i.useState(""),p={nickname:u,username:t,email:a,password:m,passwordConfirm:f,emailVisibility:!0};async function g(){if(M(p))return;if(m!==f)return l("비밀번호가 일치하지 않습니다");if(await I(p))return;const o=await w("users",p);o&&await w("follow",{owner:o.id}),await y([t,m]),globalThis.location.href="/"}i.useEffect(()=>{const d=o=>{o.key==="Enter"&&g()};return window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)});const S={title:"Best Place - 회원가입",description:"Best Place 회원가입 페이지",keywords:["회원가입","즉시접속"],image:"/logo.svg"};return e.jsxs(B,{children:[e.jsx(E,{props:S}),e.jsxs(H,{children:[e.jsx(C,{}),e.jsxs(N,{children:[e.jsx(r,{labelValue:"아이디",placeHolder:"4~20자리 영문/숫자로 입력해주세요.",inputValue:n}),e.jsx(r,{labelValue:"닉네임",placeHolder:"2~10자리 문자로 입력해주세요.",inputValue:c}),e.jsx(r,{labelValue:"이메일",placeHolder:"이메일을 입력하세요.",inputValue:x}),e.jsx(r,{labelValue:"비밀번호",placeHolder:"숫자/영문/특문 8~16글자로 입력해주세요.",inputValue:j,type:"password"}),e.jsx(r,{labelValue:"비밀번호 확인",placeHolder:"비밀번호를 다시 입력해주세요.",inputValue:h,type:"password"})]}),e.jsxs("div",{className:"mt-4 grow",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"이미 Best Place 회원이신가요?"}),e.jsx(P,{value:"로그인으로 돌아가기",handleEvent:()=>s("/")})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(R,{value:"회원가입"}),e.jsx(L,{ariaLabel:"회원가입",handleEvent:()=>g()})]})]})]})}export{G as default};
